var max_home_reply_size=350,direct_reply_template=document.getElementById("direct_reply_template");direct_reply_template&&(direct_reply_template.onsubmit=validate_direct_reply);for(var dir_rep_btns=document.getElementsByClassName("dir_rep"),i=0,len=dir_rep_btns.length;i<len;i++)dir_rep_btns[i].onclick=toggle_direct_reply_box;function detect_android_ver(){var e=navigator.userAgent;return 0<=e.indexOf("Android")?parseFloat(e.slice(e.indexOf("Android")+8)):100}function stringIsEmpty(e){return!e||0==e.trim().length}function reset_err_msgs(){var e=document.getElementById("dir_rep_empty"),t=document.getElementById("dir_rep_max_len_err"),l=document.getElementById("dir_rep_chars");e.style.display="none",t.style.display="none",l.innerHTML=""}function validate_direct_reply(e){reset_err_msgs();var t=document.getElementById("dir_rep_body");if(stringIsEmpty(t.value))e.preventDefault(),document.getElementById("dir_rep_empty").style.display="block";else if(t.value.length>max_home_reply_size){e.preventDefault(),document.getElementById("dir_rep_chars").innerHTML=t.value.length,document.getElementById("dir_rep_max_len_err").style.display="block"}}function toggle_direct_reply_box(e){if(direct_reply_template&&"[object OperaMini]"!==Object.prototype.toString.call(window.operamini)&&!(detect_android_ver()<4.1)){e.preventDefault();var t=this.form;reset_err_msgs();var l=t.elements.dr_pl.value.split(":"),r=(l[0],l[1]),n=l[2],d=l[3],_=l[4],i=(l[5],document.getElementById("disc_btns"+d)),p=i.nextElementSibling;null==p?(empty_input_value(),i.insertAdjacentElement("afterend",direct_reply_template),populate_input_values(n,d,_,r),direct_reply_template.style.display="block"):null!=p&&"direct_reply_template"===p.id&&"block"===direct_reply_template.style.display?(direct_reply_template.style.display="none",empty_input_value()):(empty_input_value(),i.insertAdjacentElement("afterend",direct_reply_template),populate_input_values(n,d,_,r),direct_reply_template.style.display="block")}}function empty_input_value(){document.getElementById("drep_poid").value="",document.getElementById("drep_obid").value="",document.getElementById("drep_tuid").value="",document.getElementById("drep_obtp").value=""}function populate_input_values(e,t,l,r){var n=document.getElementById("drep_poid"),d=document.getElementById("drep_obid"),_=document.getElementById("drep_tuid"),i=document.getElementById("drep_obtp");n.value=e,d.value=t,_.value=l,i.value=r}