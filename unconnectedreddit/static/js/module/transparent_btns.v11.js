for(var fbtns=document.getElementsByClassName("fbtn"),i=0,len=fbtns.length;i<len;i++)fbtns[i].onclick=process_follow;function process_follow(e){var t=e.currentTarget,n=t.name;if("[object OperaMini]"!==Object.prototype.toString.call(window.operamini)&&t.value&&n){e.preventDefault();for(var l=t.value.split("*"),o=(l[0],l[1],l[2],l[3],l[4]),d=l[5],r=(l[6],document.getElementsByClassName(o)),a=0,i=r.length;a<i;a++){r[a].disabled=!0;var s=r[a].form.getElementsByTagName("button")[0],u=s.childNodes,c=u[0].childNodes[0],m=u[1],g=m.innerHTML;toggle_follow_btn(s,c,m,g)}if(void 0!==o){var p=new FormData;p.append(n,t.value);var _=new XMLHttpRequest;"FOLLOW"===g?_.open("POST","/follow/add/"):"UNFOLLOW"===g?_.open("POST","/follow/remove/"):_.open("POST","/follow/add/"),_.timeout=15e3,_.setRequestHeader("X-CSRFToken",get_cookie("csrftoken")),_.setRequestHeader("X-Requested-With","XMLHttpRequest"),_.onload=function(){if(200==this.status){var e=JSON.parse(this.responseText);if(e.success)if("followed"===e.message){for(var t=0,n=r.length;t<n;t++)r[t].disabled=!1;display_and_fade_out(l="You followed ".concat(d),determine_pause_length(l),"notif")}else if("unfollowed"===e.message){for(t=0,n=r.length;t<n;t++)r[t].disabled=!1;var l;display_and_fade_out(l="You unfollowed ".concat(d),determine_pause_length(l),"notif")}else for(t=0,n=r.length;t<n;t++){toggle_follow_btn(o=r[t].form.getElementsByTagName("button")[0],(a=o.childNodes)[0].childNodes[0],a[1],"default")}else if("text"===e.type){for(t=0,n=r.length;t<n;t++){r[t].disabled=!1,toggle_follow_btn(o=r[t].form.getElementsByTagName("button")[0],(a=o.childNodes)[0].childNodes[0],a[1],"default")}display_and_fade_out(e.message,determine_pause_length(e.message),"err")}else if("redirect"===e.type)window.location.replace(e.message);else for(t=0,n=r.length;t<n;t++){r[t].disabled=!1,toggle_follow_btn(o=r[t].form.getElementsByTagName("button")[0],(a=o.childNodes)[0].childNodes[0],a[1],"default")}}else for(t=0,n=r.length;t<n;t++){var o,a;r[t].disabled=!1,toggle_follow_btn(o=r[t].form.getElementsByTagName("button")[0],(a=o.childNodes)[0].childNodes[0],a[1],"default")}},_.onerror=function(){for(var e=0,t=r.length;e<t;e++){r[e].disabled=!1;var n=r[e].form.getElementsByTagName("button")[0],l=n.childNodes;toggle_follow_btn(n,l[0].childNodes[0],l[1],"default")}var o="Kuch kharab ho gaya, dubara try karein";display_and_fade_out(o,determine_pause_length(o),"err")},_.onprogress=function(){},_.ontimeout=function(e){for(var t=0,n=r.length;t<n;t++){r[t].disabled=!1;var l=r[t].form.getElementsByTagName("button")[0],o=l.childNodes;toggle_follow_btn(l,o[0].childNodes[0],o[1],"default")}var d="Internet slow hai, baad mein try karein";display_and_fade_out(d,determine_pause_length(d),"err")},_.send(p)}}}function toggle_follow_btn(e,t,n,l){return"FOLLOW"===l?(e.style.border="1px solid #a9a9a9",t.src="/static/img/unfollow.svg",n.style.color="#a6a6a6",n.innerHTML="UNFOLLOW",!0):"UNFOLLOW"===l?(e.style.border="1px solid #7f68fd",t.src="/static/img/follow.svg",n.style.color="#7f68fd",n.innerHTML="FOLLOW",!0):"FOLLOW"===n.innerHTML?(e.style.border="1px solid #a9a9a9",t.src="/static/img/unfollow.svg",n.style.color="#a6a6a6",n.innerHTML="UNFOLLOW",!1):(e.style.border="1px solid #7f68fd",t.src="/static/img/follow.svg",n.style.color="#7f68fd",n.innerHTML="FOLLOW",!1)}var sv=!1,vbtns=document.getElementsByClassName("vbtn");for(i=0,len=vbtns.length;i<len;i++)vbtns[i].onclick=cast_vote;function cast_vote(e){var t=e.currentTarget,n=t.name;if("[object OperaMini]"!==Object.prototype.toString.call(window.operamini)&&t.value&&n){e.preventDefault(),t.disabled=!0;var l=t.value.split(":"),o=l[0],d=l[1],r=(l[2],l[3],document.getElementById("uident"));if(void 0!==r&&r.value===d&&(sv=!0),!0===sv){var a="Apni post ko like nahi kar saktey";display_and_fade_out(a,determine_pause_length(a),"err"),sv=!1,t.disabled=!1}else{var i=t.form.getElementsByTagName("button")[0],s=i.childNodes,u=s[0].childNodes[0],c=s[1];if(toggle_like_btn(i,u,c),void 0!==o&&void 0!==r){var m=new FormData;m.append(n,t.value);var g=new XMLHttpRequest;g.open("POST","/cast_vote/"),g.timeout=15e3,g.setRequestHeader("X-CSRFToken",get_cookie("csrftoken")),g.setRequestHeader("X-Requested-With","XMLHttpRequest"),g.onload=function(){if(t.disabled=!1,200==this.status){var e=JSON.parse(this.responseText);if(e.success){if("new"===e.message)toggle_like_btn(i,u,c,"unlike")||display_and_fade_out("Liked & Saved!",determine_pause_length("Liked & Saved!"),"notif");else if("old"===e.message){toggle_like_btn(i,u,c,"like")||display_and_fade_out("Removed Like & Save!",determine_pause_length("Removed Like & Save!"),"notif")}}else"text"===e.type?(toggle_like_btn(i,u,c),display_and_fade_out(e.message,determine_pause_length(e.message),"err")):"redirect"===e.type&&window.location.replace(e.message)}else{var n="Kuch ghalat ho gaya, dubara try karein";toggle_like_btn(i,u,c),display_and_fade_out(n,determine_pause_length(n),"err")}},g.onerror=function(){t.disabled=!1;var e="Kuch kharab ho gaya, dubara try karein";display_and_fade_out(e,determine_pause_length(e),"err"),toggle_like_btn(i,u,c)},g.onprogress=function(){},g.ontimeout=function(e){t.disabled=!1;var n="Internet slow hai, baad mein try karein";display_and_fade_out(n,determine_pause_length(n),"err"),toggle_like_btn(i,u,c)},g.send(m)}}}}function toggle_like_btn(e,t,n,l){return void 0===l?"LIKE"===n.innerHTML?(e.style.border="1px solid #d3d3d3",t.src="/static/img/unlike.svg",n.style.color="#808080",n.innerHTML="UNLIKE",!0):"UNLIKE"===n.innerHTML?(e.style.border="1px solid #f30051",t.src="/static/img/like.svg",n.style.color="#f30051",n.innerHTML="LIKE",!0):(e.style.border="1px solid #d3d3d3",t.src="/static/img/unlike.svg",n.style.color="#808080",n.innerHTML="UNLIKE",!0):"like"===l?"LIKE"!==n.innerHTML&&(e.style.border="1px solid #f30051",t.src="/static/img/like.svg",n.style.color="#f30051",n.innerHTML="LIKE",!0):"unlike"===l?"UNLIKE"!==n.innerHTML&&(e.style.border="1px solid #d3d3d3",t.src="/static/img/unlike.svg",n.style.color="#808080",n.innerHTML="UNLIKE",!0):void 0}function determine_pause_length(e){var t=e.length;if(t<9)return 350;var n=1+.5*((t-9)/(t+9)),l=Math.round(Math.pow(350,n));return l>6e3?6e3:l}var report_btns=document.getElementsByClassName("report");for(i=0,len=report_btns.length;i<len;i++)report_btns[i].onclick=report_modal;function report_modal(e){var t=document.getElementById("report_popup");if("[object OperaMini]"!==Object.prototype.toString.call(window.operamini)&&e.currentTarget.value&&t){e.preventDefault();var n=e.currentTarget.value,l=n.substring(0,2);if("tx"===l||"im"===l||"pf"===l){if("tx"===l){var o="tx",d=document.getElementById("type_txt"),r=n.split("#",8),a=document.getElementById("tp"+r[2]);(s=document.getElementById("report_txt")).innerHTML='"'+r[7].substring(0,40)+' ..."',(u=document.getElementById("submitter")).innerHTML=r[3],(c=document.getElementById("report_label")).innerHTML="REPORT<br>TEXT",(m=document.getElementById("block_label")).innerHTML="BLOCK<br>USER";var i=r[4]}else if("pf"===l){o="pf",d=document.getElementById("type_pf"),r=n.split("#",5);(s=document.getElementById("report_pf")).src=r[4],(u=document.getElementById("user_profile")).innerHTML=r[3],(c=document.getElementById("report_label")).innerHTML="REPORT<br>USER",(m=document.getElementById("block_label")).innerHTML="BLOCK<br>USER";i=r[2]}else{var s,u,c,m;o="img",d=document.getElementById("type_img"),r=n.split("#",8);(s=document.getElementById("report_img")).src=r[5],(u=document.getElementById("uploader")).innerHTML=r[3],(c=document.getElementById("report_label")).innerHTML="REPORT<br>PHOTO",(m=document.getElementById("block_label")).innerHTML="BLOCK<br>USER";i=r[4]}var g=document.getElementById("uident").value,p=document.createElement("div");if(p.id="personal_group_overlay",p.className="ovl",p.style.background="#000000",p.style.opacity="0.5",i===g){var _=document.getElementById("report_own_item");document.body.appendChild(p),d.style.display="block",_.style.display="block",t.style.display="block",document.getElementById("report_popup_x").onclick=function(){"tx"===o?s.innerHTML="":s.src="",u.innerHTML="",_.style.display="none",t.style.display="none",d.style.display="none",p.parentNode.removeChild(p)}}else{var y,f,v,b,E,h,B,L,k,I,T=document.getElementById("report_btn"),w=document.getElementById("block_btn");if(document.body.appendChild(p),t.style.display="block",d.style.display="block",T.style.display="block",w.style.display="block","tx"===l||"im"===l){if((y=document.getElementById("r_tp")).value=o,(f=document.getElementById("r_org")).value=r[1],(v=document.getElementById("r_obid")).value=r[2],(b=document.getElementById("r_oun")).value=r[3],(E=document.getElementById("r_ooid")).value=r[4],(h=document.getElementById("r_url")).value=r[5],(B=document.getElementById("r_lid")).value=r[6],(L=document.getElementById("r_cap")).value=r[7],(k=document.getElementById("b_tun")).value=r[3],document.getElementById("b_org").value=r[1],document.getElementById("b_lid").value=r[6],document.getElementById("b_obid").value=r[2],(I=document.getElementById("b_tid")).value="7f"+parseInt(r[4],10).toString(16)+":a",a&&a.value){var N=document.getElementById("b_top"),O=document.getElementById("r_top");O.value=a.value,N.value=a.value}}else(y=document.getElementById("r_tp")).value=o,(f=document.getElementById("r_org")).value=r[1],(v=document.getElementById("r_obid")).value=r[2],(b=document.getElementById("r_oun")).value=r[3],(E=document.getElementById("r_ooid")).value=r[2],(h=document.getElementById("r_url")).value=r[4],(B=document.getElementById("r_lid")).value="",(L=document.getElementById("r_cap")).value="",(k=document.getElementById("b_tun")).value=r[3],document.getElementById("b_org").value=r[1],document.getElementById("b_lid").value="",document.getElementById("b_obid").value=r[2],(I=document.getElementById("b_tid")).value="7f"+parseInt(r[2],10).toString(16)+":a";document.getElementById("report_popup_x").onclick=function(){"tx"===o?s.innerHTML="":s.src="",u.innerHTML="",c.innerHTML="",m.innerHTML="",t.style.display="none",d.style.display="none",T.style.display="none",w.style.display="none",p.parentNode.removeChild(p),y.value="",f.value="",L.value="",v.value="",b.value="",h.value="",B.value="",E.value="",O&&O.value&&(O.value=""),I.value="",k.value="",N&&N.value&&(N.value="")}}}}}var link_btns=document.getElementsByClassName("link");for(i=0,len=link_btns.length;i<len;i++)link_btns[i].onclick=copy_url;function copy_url(e){if("[object OperaMini]"===Object.prototype.toString.call(window.operamini)||!e.currentTarget.value)return;e.preventDefault();var t="https://damadam.pk/content/"+e.currentTarget.value+"/g/",n=document.createElement("textarea");n.setAttribute("readonly",!0),n.setAttribute("contenteditable",!0),n.style.position="fixed",n.value=t,document.body.appendChild(n),n.select();const l=document.createRange();l.selectNodeContents(n);const o=window.getSelection();o.removeAllRanges(),o.addRange(l),n.setSelectionRange(0,n.value.length),document.execCommand("copy"),document.body.removeChild(n),display_and_fade_out("Link copied",determine_pause_length("Link copied"),"notif")}function display_and_fade_out(e,t,n){if("err"===n)var l=document.getElementById("quick_err_prompt"),o=document.getElementById("quick_err_text");else l=document.getElementById("quick_prompt"),o=document.getElementById("quick_text");if(o&&(o.innerHTML=e),l){var d=l.style;d.display="block",d.opacity=1}o&&l&&setTimeout(function(){!function e(){(d.opacity-=.1)<0?d.display="none":setTimeout(e,30)}()},t)}function get_cookie(e){if(!e)return null;var t=("; "+document.cookie).split("; "+e+"=");return t.length>=2?t.pop().split(";").shift():void 0}[Element.prototype,CharacterData.prototype].forEach(function(e){e.hasOwnProperty("previousElementSibling")||Object.defineProperty(e,"previousElementSibling",{configurable:!0,enumerable:!0,get:function(){for(var e=this;e=e.previousSibling;)if(1===e.nodeType)return e;return null},set:void 0})}),function(e){e&&e.prototype&&null==e.prototype.lastElementChild&&Object.defineProperty(e.prototype,"lastElementChild",{get:function(){for(var e,t=this.childNodes,n=t.length-1;e=t[n--];)if(1===e.nodeType)return e;return null}})}(window.Node||window.Element);