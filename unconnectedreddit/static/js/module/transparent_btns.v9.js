function process_follow(n){var d=n.currentTarget;var g=d.name;if(Object.prototype.toString.call(window.operamini)==='[object OperaMini]'||!d.value||!g)return;n.preventDefault();var c=d.value.split('*');var q=c[0];var r=c[1];var s=c[2];var t=c[3];var h=c[4];var i=c[5];var u=c[6];var a=document.getElementsByClassName(h);for(var e=0,o=a.length;e<o;e++){a[e].disabled=!0;var j=a[e].form.getElementsByTagName('button')[0];var k=j.childNodes;var p=k[0].childNodes[0];var l=k[1];var f=l.innerHTML;toggle_follow_btn(j,p,l,f);}if(h!==void 0){var m=new FormData();m.append(g,d.value);var b=new XMLHttpRequest();f==='FOLLOW'?b.open('POST','/follow/add/'):f==='UNFOLLOW'?b.open('POST','/follow/remove/'):b.open('POST','/follow/add/'),b.timeout=15000,b.setRequestHeader('X-CSRFToken',get_cookie('csrftoken')),b.setRequestHeader('X-Requested-With','XMLHttpRequest'),b.onload=function(){if(this.status==200){var h=JSON.parse(this.responseText);if(h.success)if(h.message==='followed'){for(var b=0,c=a.length;b<c;b++)a[b].disabled=!1;var j='You followed '.concat(i);display_and_fade_out(j,determine_pause_length(j),'notif');}else if(h.message==='unfollowed'){for(var b=0,c=a.length;b<c;b++)a[b].disabled=!1;var j='You unfollowed '.concat(i);display_and_fade_out(j,determine_pause_length(j),'notif');}else for(var b=0,c=a.length;b<c;b++){var d=a[b].form.getElementsByTagName('button')[0];var e=d.childNodes;var f=e[0].childNodes[0];var g=e[1];toggle_follow_btn(d,f,g,'default');}else if(h.type==='text'){for(var b=0,c=a.length;b<c;b++){a[b].disabled=!1;var d=a[b].form.getElementsByTagName('button')[0];var e=d.childNodes;var f=e[0].childNodes[0];var g=e[1];toggle_follow_btn(d,f,g,'default');}display_and_fade_out(h.message,determine_pause_length(h.message),'err');}else if(h.type==='redirect')window.location.replace(h.message);else for(var b=0,c=a.length;b<c;b++){a[b].disabled=!1;var d=a[b].form.getElementsByTagName('button')[0];var e=d.childNodes;var f=e[0].childNodes[0];var g=e[1];toggle_follow_btn(d,f,g,'default');}}else for(var b=0,c=a.length;b<c;b++){a[b].disabled=!1;var d=a[b].form.getElementsByTagName('button')[0];var e=d.childNodes;var f=e[0].childNodes[0];var g=e[1];toggle_follow_btn(d,f,g,'default');}},b.onerror=function(){for(var b=0,f=a.length;b<f;b++){a[b].disabled=!1;var c=a[b].form.getElementsByTagName('button')[0];var d=c.childNodes;var g=d[0].childNodes[0];var h=d[1];toggle_follow_btn(c,g,h,'default');}var e='Kuch kharab ho gaya, dubara try karein';display_and_fade_out(e,determine_pause_length(e),'err');},b.onprogress=function(){},b.ontimeout=function(i){for(var b=0,f=a.length;b<f;b++){a[b].disabled=!1;var c=a[b].form.getElementsByTagName('button')[0];var d=c.childNodes;var g=d[0].childNodes[0];var h=d[1];toggle_follow_btn(c,g,h,'default');}var e='Internet slow hai, baad mein try karein';display_and_fade_out(e,determine_pause_length(e),'err');},b.send(m);}}function toggle_follow_btn(b,c,a,d){if(d==='FOLLOW')return b.style.border='1px solid #a9a9a9',c.src='/static/img/unfollow.svg',a.style.color='#a6a6a6',a.innerHTML='UNFOLLOW',!0;else if(d==='UNFOLLOW')return b.style.border='1px solid #7f68fd',c.src='/static/img/follow.svg',a.style.color='#7f68fd',a.innerHTML='FOLLOW',!0;else{var e=a.innerHTML;return e==='FOLLOW'?(b.style.border='1px solid #a9a9a9',c.src='/static/img/unfollow.svg',a.style.color='#a6a6a6',a.innerHTML='UNFOLLOW',!1):(b.style.border='1px solid #7f68fd',c.src='/static/img/follow.svg',a.style.color='#7f68fd',a.innerHTML='FOLLOW',!1);}}function cast_vote(l){var a=l.currentTarget;var h=a.name;if(Object.prototype.toString.call(window.operamini)==='[object OperaMini]'||!a.value||!h)return;l.preventDefault(),a.disabled=!0;var f=a.value.split(':');var m=f[0];var n=f[1];var o=f[2];var p=f[3];var g=document.getElementById('uident');if(g!==void 0&&g.value===n&&(sv=!0),sv===!0){var i='Apni post ko like nahi kar saktey';display_and_fade_out(i,determine_pause_length(i),'err'),sv=!1,a.disabled=!1;}else{var c=a.form.getElementsByTagName('button')[0];var j=c.childNodes;var d=j[0].childNodes[0];var e=j[1];if(toggle_like_btn(c,d,e),m!==void 0&&g!==void 0){var k=new FormData();k.append(h,a.value);var b=new XMLHttpRequest();b.open('POST','/cast_vote/'),b.timeout=15000,b.setRequestHeader('X-CSRFToken',get_cookie('csrftoken')),b.setRequestHeader('X-Requested-With','XMLHttpRequest'),b.onload=function(){if(a.disabled=!1,this.status==200){var b=JSON.parse(this.responseText);if(b.success){if(b.message==='new'){var f=toggle_like_btn(c,d,e,'unlike');f||display_and_fade_out('Liked & Saved!',determine_pause_length('Liked & Saved!'),'notif');}else if(b.message==='old'){var f=toggle_like_btn(c,d,e,'like');f||display_and_fade_out('Removed Like & Save!',determine_pause_length('Removed Like & Save!'),'notif');}}else b.type==='text'?(toggle_like_btn(c,d,e),display_and_fade_out(b.message,determine_pause_length(b.message),'err')):b.type==='redirect'&&window.location.replace(b.message);}else{var g='Kuch ghalat ho gaya, dubara try karein';toggle_like_btn(c,d,e),display_and_fade_out(g,determine_pause_length(g),'err');}},b.onerror=function(){a.disabled=!1;var b='Kuch kharab ho gaya, dubara try karein';display_and_fade_out(b,determine_pause_length(b),'err'),toggle_like_btn(c,d,e);},b.onprogress=function(){},b.ontimeout=function(f){a.disabled=!1;var b='Internet slow hai, baad mein try karein';display_and_fade_out(b,determine_pause_length(b),'err'),toggle_like_btn(c,d,e);},b.send(k);}}}function toggle_like_btn(b,c,a,d){return d===void 0?a.innerHTML==='LIKE'?(b.style.border='1px solid #d3d3d3',c.src='/static/img/unlike.svg',a.style.color='#808080',a.innerHTML='UNLIKE',!0):a.innerHTML==='UNLIKE'?(b.style.border='1px solid #f30051',c.src='/static/img/like.svg',a.style.color='#f30051',a.innerHTML='LIKE',!0):(b.style.border='1px solid #d3d3d3',c.src='/static/img/unlike.svg',a.style.color='#808080',a.innerHTML='UNLIKE',!0):d==='like'?a.innerHTML==='LIKE'?!1:(b.style.border='1px solid #f30051',c.src='/static/img/like.svg',a.style.color='#f30051',a.innerHTML='LIKE',!0):d==='unlike'?a.innerHTML==='UNLIKE'?!1:(b.style.border='1px solid #d3d3d3',c.src='/static/img/unlike.svg',a.style.color='#808080',a.innerHTML='UNLIKE',!0):void 0;}function determine_pause_length(h){var a=h.length;var b=9;var c=350;var d=6000;if(a<b)return c;else{var f=(a-b)/(a+b);var g=1+0.5*f;var e=Math.round(Math.pow(c,g));return e>d?d:e;}}function report_modal(A){var j=document.getElementById('report_popup');if(Object.prototype.toString.call(window.operamini)==='[object OperaMini]'||!A.currentTarget.value||!j)return;A.preventDefault();var v=A.currentTarget.value;var i=v.substring(0,2);if(!(i==='tx'||i==='im'||i==='pf'))return;if(i==='tx'){var d='tx';var f=document.getElementById('type_txt');var a=v.split('#',8);var w=document.getElementById('tp'+a[2]);var b=document.getElementById('report_txt');b.innerHTML='"'+a[7].substring(0,40)+' ..."';var e=document.getElementById('submitter');e.innerHTML=a[3];var g=document.getElementById('report_label');g.innerHTML='REPORT<br>TEXT';var h=document.getElementById('block_label');h.innerHTML='BLOCK<br>USER';var k=a[4];}else if(i==='pf'){var d='pf';var f=document.getElementById('type_pf');var a=v.split('#',5);var b=document.getElementById('report_pf');b.src=a[4];var e=document.getElementById('user_profile');e.innerHTML=a[3];var g=document.getElementById('report_label');g.innerHTML='REPORT<br>USER';var h=document.getElementById('block_label');h.innerHTML='BLOCK<br>USER';var k=a[2];}else{var d='img';var f=document.getElementById('type_img');var a=v.split('#',8);var b=document.getElementById('report_img');b.src=a[5];var e=document.getElementById('uploader');e.innerHTML=a[3];var g=document.getElementById('report_label');g.innerHTML='REPORT<br>FOTO';var h=document.getElementById('block_label');h.innerHTML='BLOCK<br>USER';var k=a[4];}var G=document.getElementById('uident').value;var c=document.createElement('div');if(c.id='personal_group_overlay',c.className='ovl',c.style.background='#000000',c.style.opacity='0.5',k===G){var B=document.getElementById('report_own_item');document.body.appendChild(c),f.style.display='block',B.style.display='block',j.style.display='block',document.getElementById('report_popup_x').onclick=function(){d==='tx'?b.innerHTML='':d=='pf'?b.src='':b.src='',e.innerHTML='',B.style.display='none',j.style.display='none',f.style.display='none',c.parentNode.removeChild(c);};}else{var C=document.getElementById('report_btn');var D=document.getElementById('block_btn');if(document.body.appendChild(c),j.style.display='block',f.style.display='block',C.style.display='block',D.style.display='block',i==='tx'||i==='im'){var l=document.getElementById('r_tp');l.value=d;var m=document.getElementById('r_org');m.value=a[1];var n=document.getElementById('r_obid');n.value=a[2];var o=document.getElementById('r_oun');o.value=a[3];var p=document.getElementById('r_ooid');p.value=a[4];var q=document.getElementById('r_url');q.value=a[5];var r=document.getElementById('r_lid');r.value=a[6];var s=document.getElementById('r_cap');s.value=a[7];var t=document.getElementById('b_tun');t.value=a[3];var x=document.getElementById('b_org');x.value=a[1];var y=document.getElementById('b_lid');y.value=a[6];var z=document.getElementById('b_obid');z.value=a[2];var u=document.getElementById('b_tid');if(u.value='7f'+parseInt(a[4],10).toString(16)+':a',w&&w.value){var E=document.getElementById('b_top');var F=document.getElementById('r_top');F.value=w.value,E.value=w.value;}}else{var l=document.getElementById('r_tp');l.value=d;var m=document.getElementById('r_org');m.value=a[1];var n=document.getElementById('r_obid');n.value=a[2];var o=document.getElementById('r_oun');o.value=a[3];var p=document.getElementById('r_ooid');p.value=a[2];var q=document.getElementById('r_url');q.value=a[4];var r=document.getElementById('r_lid');r.value='';var s=document.getElementById('r_cap');s.value='';var t=document.getElementById('b_tun');t.value=a[3];var x=document.getElementById('b_org');x.value=a[1];var y=document.getElementById('b_lid');y.value='';var z=document.getElementById('b_obid');z.value=a[2];var u=document.getElementById('b_tid');u.value='7f'+parseInt(a[2],10).toString(16)+':a';}document.getElementById('report_popup_x').onclick=function(){d==='tx'?b.innerHTML='':b.src='',e.innerHTML='',g.innerHTML='',h.innerHTML='',j.style.display='none',f.style.display='none',C.style.display='none',D.style.display='none',c.parentNode.removeChild(c),l.value='',m.value='',s.value='',n.value='',o.value='',q.value='',r.value='',p.value='',F.value='',u.value='',t.value='',E.value='';};}}function copy_url(b){if(Object.prototype.toString.call(window.operamini)==='[object OperaMini]'||!b.currentTarget.value)return;b.preventDefault();var e='https://damadam.pk/content/'+b.currentTarget.value+'/g/';var a=document.createElement('textarea');a.setAttribute('readonly',!0),a.setAttribute('contenteditable',!0),a.style.position='fixed',a.value=e,document.body.appendChild(a),a.select();const c=document.createRange();c.selectNodeContents(a);const d=window.getSelection();d.removeAllRanges(),d.addRange(c),a.setSelectionRange(0,a.value.length),document.execCommand('copy'),document.body.removeChild(a),display_and_fade_out('Link copied',determine_pause_length('Link copied'),'notif');}function display_and_fade_out(d,e,f){if(f==='err'){var a=document.getElementById('quick_err_prompt');var b=document.getElementById('quick_err_text');}else{var a=document.getElementById('quick_prompt');var b=document.getElementById('quick_text');}if(b&&(b.innerHTML=d),a){var c=a.style;c.display='block',c.opacity=1;}b&&a&&setTimeout(function(){(function a(){(c.opacity-=0.1)<0?c.display='none':setTimeout(a,30);}());},e);}function get_cookie(b){if(!b)return null;var c='; '+document.cookie;var a=c.split('; '+b+'=');return a.length>=2?a.pop().split(';').shift():void 0;}var fbtns=document.getElementsByClassName('fbtn');for(var i=0,len=fbtns.length;i<len;i++)fbtns[i].onclick=process_follow;var sv=!1;var vbtns=document.getElementsByClassName('vbtn');for(var i=0,len=vbtns.length;i<len;i++)vbtns[i].onclick=cast_vote;var report_btns=document.getElementsByClassName('report');for(var i=0,len=report_btns.length;i<len;i++)report_btns[i].onclick=report_modal;var link_btns=document.getElementsByClassName('link');for(var i=0,len=link_btns.length;i<len;i++)link_btns[i].onclick=copy_url;(function(a){a.forEach(function(a){if(a.hasOwnProperty('previousElementSibling'))return;Object.defineProperty(a,'previousElementSibling',{configurable:!0,enumerable:!0,get:function(){var a=this;while(a=a.previousSibling)if(a.nodeType===1)return a;return null;},set:undefined});});}([Element.prototype,CharacterData.prototype]),function(a){a&&a.prototype&&a.prototype.lastElementChild==null&&Object.defineProperty(a.prototype,'lastElementChild',{get:function(){var a,b=this.childNodes,c=b.length-1;while(a=b[c--])if(a.nodeType===1)return a;return null;}});}(window.Node||window.Element));